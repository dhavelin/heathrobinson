<!doctype html>
<html lang="en" ng-app="heathRobinson" ng-controller="machine">
  <head>
    <meta charset="utf-8">
    <title>Heath Robinson Simulator</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/app.css?1">
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
    <style type="text/css" data-ng-bind="keyframes"></style>
    <style type="text/css" data-ng-bind="duration"></style>
    <style type="text/css" data-ng-bind="animationName"></style>
  </head>
  <body>

    <div class="container">
      <div class="row">

          <h1>
            <img src="img/title.png" alt="Stack Overflow" title="Heath Robinson" />
          </h1>

      </div>
    </div>

    <div class="container" style="border-left:1px solid #aaa;border-right:1px solid #aaa">
      <div id="headers" class="row">

        <div class="col-xs-4">
          <div id="tape-headers">
            <div class="tape-header" style="margin-right: 20px">
              <h2>Ciphertext</h2>
              <span>Length: {{tape1.len}}</span>
            </div>
            <div class="tape-header">
              <h2>Partial Key</h2>
              <span>Length: {{tape2.len}}</span>
            </div>
          </div>
        </div>

      </div>

      <div id="machine" class="row">

        <div class="col-xs-4">
          <div id="bedstead" data-bedstead>
            <div id="tape1" class="tape" data-tape data-ttydata="tape1.sequence"
                 data-loop-counter="tape1.loopCounter"
                 data-reset="tapeReset" data-tape-object="tape1"></div>
            <div id="tape2" class="tape" data-tape data-ttydata="tape2.sequence"
                 data-loop-counter="tape2.loopCounter"
                 data-reset="tapeReset" data-tape-object="tape2" style="margin-left: 20px"></div>
          </div>
        </div>

        <div class="col-xs-4" style="text-align: center">

          <div id="photocells">
            <h2>Photocell Output</h2>
            <div data-photocell data-title="Ciphertext" data-symbol="Z" data-ttydata="tape1.sequence" data-position="tape1.position" data-style="margin-right: 10px"></div>
            <div data-photocell data-title="Partial Key"  data-symbol="K" data-ttydata="tape2.sequence" data-position="tape2.position" data-style=""></div>
          </div>

          <div id="function">
            <h2>Logic Output</h2>
            <p>&#x394;z<sub>1</sub> &#x2295; &#x394;z<sub>2</sub><br>&#x2295;<br>&#x394;k<sub>1</sub> &#x2295; &#x394;k<sub>2</sub><br>= {{logicOutput}}</p>
          </div>

        </div>

        <div class="col-xs-4">

          <table id="score">
            <thead>
              <tr>
                <th>Loop</th>
                <th>Score</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-ng-bind="tape2.loopCounter | zeropad"></td>
                <td score></td>
              </tr>
            </tbody>
          </table>

          <div id="printer">
            <h2>Printer Output</h2>
            <div class="output">
              <h3>Loop</h3><h3>Score</h3>
              <pre>{{printout.loop}}</pre><pre>{{printout.score}}</pre>
            </div>
          </div>
        </div>

      </div>
      <div id="controls" class="row">
        <div class="col-xs-12">
          <form class="form-inline" role="form">
            <button class="btn btn-primary" ng-click="resetTapes()">
              <span class="glyphicon glyphicon-repeat"></span>
              Reset</button><button class="btn btn-primary" ng-click="togglePlaystate()">
              <span ng-class="{'glyphicon': true, 'glyphicon-stop': !enablePlay, 'glyphicon-play': enablePlay}"></span>
              <span ng-if="!enablePlay">Stop</span>
              <span ng-if="enablePlay">Start</span>
            </button>
            <div class="form-group">
              <label class="sr-only" for="tapeSpeed">Tape Speed</label>
              <select id="tapeSpeed" class="form-control" ng-model="tapeSpeed" ng-options="s.description for s in speeds"></select>
            </div>
          </form>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <p>The characters of the ciphertext and partial key streams have no meaning - they are just a sequence of bits. We can therefore ignore the alternate "figure" character mappings (see the section on "International Telegraph Alphabet No. 2" below). We can also use more convenient symbols for the various control commands, and space and null characters, just as they did at Bletchley Park:</p>
        <table class="table table-condensed table-bordered controlchars">
          <thead>
            <tr>
              <th>Code</th>
              <th>Original</th>
              <th>Replacement</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="code">&#x2022;&#x2022;X&#x2022;&#x2022;</td>
              <td>Space</td>
              <td class="replacement">9</td>
            </tr>
            <tr>
              <td class="code">&#x2022;X&#x2022;&#x2022;&#x2022;</td>
              <td class="name">Carriage return</td>
              <td class="replacement">3</td>
            </tr>
            <tr>
              <td class="code">&#x2022;&#x2022;&#x2022;X&#x2022;</td>
              <td class="name">Line feed</td>
              <td class="replacement">4</td>
            </tr>
            <tr>
              <td class="code">XXXXX</td>
              <td class="name">Shift to letters</td>
              <td class="replacement">8</td>
            </tr>
            <tr>
              <td class="code">XX&#x2022;XX</td>
              <td class="name">Shift to numbers</td>
              <td class="replacement">+</td>
            </tr>
            <tr>
              <td class="code">&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;</td>
              <td class="name">Null</td>
              <td class="replacement">/</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="teletype" class="row">
        <table class="table table-condensed table-bordered teletype">
          <thead>
            <tr>
              <th colspan="12">Allowed characters</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;</td>
              <td class="char">/</td>
              <td>&#x2022;&#x2022;XX&#x2022;</td>
              <td class="char">I</td>
              <td>&#x2022;XX&#x2022;&#x2022;</td>
              <td class="char">N</td>
              <td>X&#x2022;&#x2022;X&#x2022;</td>
              <td class="char">L</td>
              <td>XX&#x2022;&#x2022;&#x2022;</td>
              <td class="char">O</td>
              <td>XXXX&#x2022;</td>
              <td class="char">V</td>
            </tr>
            <tr>
              <td>&#x2022;&#x2022;&#x2022;&#x2022;X</td>
              <td class="char">E</td>
              <td>&#x2022;&#x2022;XXX</td>
              <td class="char">U</td>
              <td>&#x2022;XX&#x2022;X</td>
              <td class="char">F</td>
              <td>X&#x2022;&#x2022;XX</td>
              <td class="char">W</td>
              <td>XX&#x2022;&#x2022;X</td>
              <td class="char">B</td>
              <td>XXXXX</td>
              <td class="char">8</td>
            </tr>
            <tr>
              <td>&#x2022;&#x2022;&#x2022;X&#x2022;</td>
              <td class="char">4</td>
              <td>&#x2022;X&#x2022;&#x2022;&#x2022;</td>
              <td class="char">3</td>
              <td>&#x2022;XXX&#x2022;</td>
              <td class="char">C</td>
              <td>X&#x2022;X&#x2022;&#x2022;</td>
              <td class="char">H</td>
              <td>XX&#x2022;X&#x2022;</td>
              <td class="char">G</td>
              <td colspan="2" rowspan="4"></td>
            </tr>
            <tr>
              <td>&#x2022;&#x2022;&#x2022;XX</td>
              <td class="char">A</td>
              <td>&#x2022;X&#x2022;&#x2022;X</td>
              <td class="char">D</td>
              <td>&#x2022;XXXX</td>
              <td class="char">K</td>
              <td>X&#x2022;X&#x2022;X</td>
              <td class="char">Y</td>
              <td>XX&#x2022;XX</td>
              <td class="char">+</td>
            </tr>
            <tr>
              <td>&#x2022;&#x2022;X&#x2022;&#x2022;</td>
              <td class="char">9</td>
              <td>&#x2022;X&#x2022;X&#x2022;</td>
              <td class="char">R</td>
              <td>X&#x2022;&#x2022;&#x2022;&#x2022;</td>
              <td class="char">T</td>
              <td>X&#x2022;XX&#x2022;</td>
              <td class="char">P</td>
              <td>XXX&#x2022;&#x2022;</td>
              <td class="char">M</td>
            </tr>
            <tr>
              <td>&#x2022;&#x2022;X&#x2022;X</td>
              <td class="char">S</td>
              <td>&#x2022;X&#x2022;XX</td>
              <td class="char">J</td>
              <td>X&#x2022;&#x2022;&#x2022;X</td>
              <td class="char">Z</td>
              <td>X&#x2022;XXX</td>
              <td class="char">Q</td>
              <td>XXX&#x2022;X</td>
              <td class="char">X</td>
            </tr>

          </tbody>
        </table>
      </div>
    </div>

    include "includes/documentation.html"

    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular.min.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>